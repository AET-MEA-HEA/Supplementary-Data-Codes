function m = quat_to_rotm(q_raw)
  q = q_raw/norm(q_raw);
  m = [ ...
    1-2*(q(3)*q(3)+q(4)*q(4)), 2*(q(2)*q(3)-q(4)*q(1)), 2*(q(2)*q(4)+q(3)*q(1))  ; ...
    2*(q(2)*q(3)+q(4)*q(1)), 1-2*(q(2)*q(2)+q(4)*q(4)), 2*(q(3)*q(4)-q(2)*q(1))  ; ...
    2*(q(2)*q(4)-q(3)*q(1)), 2*(q(3)*q(4)+q(2)*q(1)), 1-2*(q(2)*q(2)+q(3)*q(3)) ...
  ];
end